### 



### 19-Vue 常用指令-自定义全局指令

在Vue中除了可以使用内置的指令外，还可以自定义指令

 

自定义全局指令语法

```
Vue.directive(‘自定义指令名称’,{
声明周期名称:function(el){
    指令业务逻辑代码
}
})

```

注意：自定义指令 定义时候的名称不需要写”v-”，使用时再写。

指令可以在不同的声明周期阶段执行：

| bind     | 指令被绑定到元素上的时候执行             |
| -------- | ---------------------------------------- |
| inserted | 绑定指令的元素被添加到父元素上的时候执行 |

![image-20211117162313291](https://tva1.sinaimg.cn/large/008i3skNgy1gwi8355kbrj30no0b6dgn.jpg)

bind是指令绑定到元素的时候的

![image-20211117162331984](https://tva1.sinaimg.cn/large/008i3skNgy1gwi83f833lj30oi0aajs1.jpg)

inserted是元素渲染到dom上之后的。

### 20-Vue 常用指令-自定义指令参数

![image-20211117162353344](https://tva1.sinaimg.cn/large/008i3skNgy1gwi83st7i9j30mk0ggdh3.jpg)

参数可以是Model的data中的数据，就不需要引号括起来了，因为是变量了。

指令钩子函数会被传入以下参数：

el：指令所绑定的元素，可以用来直接操作 DOM。

binding：一个对象，包含以下 property：

name：指令名，不包括 v- 前缀。

value：指令的绑定值，例如：v-my-directive="1 + 1" 中，绑定值为 2。

oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。

expression：字符串形式的指令表达式。例如 v-my-directive="1 + 1" 中，表达式为 "1 + 1"。

arg：传给指令的参数，可选。例如 v-my-directive:foo 中，参数为 "foo"。

modifiers：一个包含修饰符的对象。例如：v-my-directive.foo.bar 中，修饰符对象为 { foo: true, bar: true }。









### 21-Vue 常用指令-自定义 **局部** 指令

自定义全局指令的特点：任何一个Vue实例控制的区域中都可以使用

 

自定义局部指令的特点：只能在自定义的那个Vue实例中使用

 

如何定义一个局部指令：给创建Vue实例传递的对象添加

![image-20211117162452965](https://tva1.sinaimg.cn/large/008i3skNgy1gwi84u0g3lj30my0kyta9.jpg)注意：directives 多了个s。





## Vue计算属性

+ 插值语法特点

可以在 `{{}}` 中编写合法的 JS 表达式。

2 在插值语法中编写JS表达式的缺点

没有代码提示

语句过于复杂不利于维护

3 如何解决

对于复杂逻辑，应当使用计算属性

 

定义计算属性

![image-20211121221531393](https://tva1.sinaimg.cn/large/008i3skNgy1gwn4qwjncwj30r20iqmyw.jpg)

computed:{ //专门用于定义计算属性的}

注意：定义的时候是通过一个函数返回数据，使用的时候不能加括号。因为其实属性，不是方法

![image-20211121221556508](https://tva1.sinaimg.cn/large/008i3skNgy1gwn4rdca2ij30xe06ut9c.jpg)

计算属性和函数的区别

| 函数                             | 计算属性                                                     |
| -------------------------------- | ------------------------------------------------------------ |
| 每次调用都会执行                 | 只要返回的结果没发生变化，就只会执行一次                     |
| 数据经常发生变化的时候使用该函数 | 由于会将返回的结果进行缓存，如果返回的数据不经常发生变化，使用计算属性的性能比使用函数高 |

