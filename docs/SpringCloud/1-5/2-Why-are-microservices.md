# 2-为什么是微服务？

## 单体应用

![输入图片说明](https://tva1.sinaimg.cn/large/008i3skNgy1gwuxsa7widj31ke0f4dhj.jpg "屏幕截图.png")

### 优点

单一架构模式在项目初期很小的时候开发方便，测试方便，部署方便，运行良好。

### 缺点

- 应用随着时间的推进，加入的功能越来越多，最终会变得巨大，一个项目中很有可能数百万行的代码，互相之间繁琐的 jar 包；
- 久而久之，开发效率低，代码维护困难；
- 还有一个如果想整体应用采用新的技术，新的框架或者语言，那是不可能的；
- 任意模块的漏洞或者错误都会影响这个应用，降低系统的可靠性。

## 微服务架构应用

![输入图片说明](https://tva1.sinaimg.cn/large/008i3skNgy1gwvo2bkpf5j31oy0j8dik.jpg "屏幕截图.png")

### 优点

- 将服务拆分成多个单一职责的小的服务，进行单独部署，服务之间通过网络进行通信；
- 每个服务应该有自己单独的管理团队，高度自治；
- 服务各自有自己单独的职责，服务之间松耦合，避免因一个模块的问题导致服务崩溃。

### 缺点

- 开发人员要处理分布式系统的复杂性；
- 多服务运维难度，随着服务的增加，运维的压力也在增大；
-  **服务治理** 和 **服务监控** 是关键。

> 最难的是：服务治理、服务监控。

## 架构的演变

### 架构的演变过程

- [单一应用架构] `===>` [垂直应用架构] `===>` [分布式服务架构] `===>` [流动计算架构]||[微服务架构] `===>` [未知]


Dubbo 官网的架构图：http://dubbo.apache.org/zh-cn/docs/user/preface/background.html

![输入图片说明](https://tva1.sinaimg.cn/large/008i3skNgy1gwvo2r2dffj31dx0adwg5.jpg "屏幕截图.png")

1. All in One Application：单一架构

- 起初当网站流量很小时，将所有功能都写在一个应用里面，对整个应用进行部署，以减少部署节点和成本。对于这个架构简化增删改查的工作量的数据访问框架（ORM）是关键。

2. Vertical Application：垂直架构
- 当访问量逐渐增大，单一应用增加机器带来的加速度越来越小，提升效率的方法之一是将应用拆成互不相干的几个应用，以提升效率。此时，用于加速前端页面开发的 Web 框架（MVC）是关键。

3. Distributed Service：分布式服务架构

- 当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求。此时，用于提高业务复用及整合的分布式服务框架(RPC)是关键。

4. Elastic Computing：流动计算架构即微服务架构

> 弹性计算

-  **当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现，此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率。此时，用于提高机器利用率的资源调度和治理中心（SOA）是关键。** 

- 友情提醒：**好的架构并不是设计出来的，一定是进化来的**。