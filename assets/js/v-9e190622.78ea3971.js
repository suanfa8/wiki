"use strict";(self.webpackChunkblog_tools=self.webpackChunkblog_tools||[]).push([[8871],{3428:(e,s,n)=>{n.r(s),n.d(s,{data:()=>a});const a={key:"v-9e190622",path:"/SpringCloud/12-Bus/12-2-rabbitmq.html",title:"",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"12-2 实现配置刷新原理",slug:"_12-2-实现配置刷新原理",children:[{level:3,title:"搭建 RabbitMQ 服务",slug:"搭建-rabbitmq-服务",children:[]}]}],filePathRelative:"SpringCloud/12-Bus/12-2-rabbitmq.md",git:{updatedTime:1638143942e3,contributors:[{name:"suanfa8",email:"45396320+suanfa8@users.noreply.github.com",commits:1}]}}},1441:(e,s,n)=>{n.r(s),n.d(s,{default:()=>i});const a=(0,n(6252).uE)('<h2 id="_12-2-实现配置刷新原理" tabindex="-1"><a class="header-anchor" href="#_12-2-实现配置刷新原理" aria-hidden="true">#</a> 12-2 实现配置刷新原理</h2><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu8860w1zj31py0sm78r.jpg" alt="image-20200723150335451"></p><h3 id="搭建-rabbitmq-服务" tabindex="-1"><a class="header-anchor" href="#搭建-rabbitmq-服务" aria-hidden="true">#</a> 搭建 RabbitMQ 服务</h3><p>第 0 步：下载 RabbitMQ 安装包（可以直接使用 Docker 安装更方便）</p><p>官方安装包下载：https://www.rabbitmq.com/install-rpm.html#downloads</p><p>注意：这里安装包只能用于 Centos7.x 系统。</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu888kenfj317k04k3z6.jpg" alt="image-20190925220343521"></p><p>第 1 步：将 RabbitMQ 安装包上传到 Linux 系统中</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>erlang-22.0.7-1.el7.x86_64.rpm\nrabbitmq-server-3.7.18-1.el7.noarch.rpm\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第 2 步：安装 Erlang 依赖包</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>rpm -ivh erlang-22.0.7-1.el7.x86_64.rpm\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>第 3 步：安装 RabbitMQ 安装包（需要联网）</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yum install -y rabbitmq-server-3.7.18-1.el7.noarch.rpm\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>注意：默认安装完成后配置文件模板在：<code>/usr/share/doc/rabbitmq-server-3.7.18/rabbitmq.config.example</code> 目录中，需要将配置文件复制到 <code>/etc/rabbitmq/</code> 目录中，并修改名称为 <code>rabbitmq.config</code>。</p><p>第 4 步：复制配置文件</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cp /usr/share/doc/rabbitmq-server-3.7.18/rabbitmq.config.example /etc/rabbitmq/rabbitmq.config\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>第 5 步：查看配置文件位置</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ls /etc/rabbitmq/rabbitmq.config\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>第 6 步：修改配置文件（参见下图）</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>vim /etc/rabbitmq/rabbitmq.config \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu88ayegdj31mw0c2jwi.jpg" alt="image-20190925222230260"></p><p>将上图中配置文件中红色部分去掉 <code>%%</code>，以及最后的 <code>,</code> 逗号修改为下图：</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu88caofkj31my088tb2.jpg" alt="image-20190925222329200"></p><p>第 7 步：执行如下命令，启动 RabbitMQ 中的插件管理</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>rabbitmq-plugins enable rabbitmq_management\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>出现如下说明：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\t\tEnabling plugins on node rabbit@localhost:\n    rabbitmq_management\n    The following plugins have been configured:\n      rabbitmq_management\n      rabbitmq_management_agent\n      rabbitmq_web_dispatch\n    Applying plugin configuration to rabbit@localhost...\n    The following plugins have been enabled:\n      rabbitmq_management\n      rabbitmq_management_agent\n      rabbitmq_web_dispatch\n\n    set 3 plugins.\n    Offline change; changes will take effect at broker restart.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>第 8 步：启动 RabbitMQ 的服务</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>systemctl start rabbitmq-server\nsystemctl restart rabbitmq-server\nsystemctl stop rabbitmq-server\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>第 9 步：查看服务状态（见下图）</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>systemctl status rabbitmq-server\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code> ● rabbitmq-server.service - RabbitMQ broker\n     Loaded: loaded (/usr/lib/systemd/system/rabbitmq-server.service; disabled; vendor preset: disabled)\n     Active: active (running) since 三 2019-09-25 22:26:35 CST; 7s ago\n   Main PID: 2904 (beam.smp)\n     Status: &quot;Initialized&quot;\n     CGroup: /system.slice/rabbitmq-server.service\n             ├─2904 /usr/lib64/erlang/erts-10.4.4/bin/beam.smp -W w -A 64 -MBas ageffcbf -MHas ageffcbf -\n             MBlmbcs...\n             ├─3220 erl_child_setup 32768\n             ├─3243 inet_gethost 4\n             └─3244 inet_gethost 4\n      .........\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu88gpiivj31dh0u0wm1.jpg" alt="image-20190925222743776"></p><p>第 10 步：关闭防火墙服务</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>systemctl disable firewalld\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.\nRemoved symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>systemctl stop firewalld   \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>第 11 步：访问 web 管理界面</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http://10.15.0.8:15672/\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu88kvjbsj320y0ggwgk.jpg" alt="image-20190926194738708"></p><p>第 12 步：登录管理界面</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>username:  guest\npassword:  guest\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu88nkkv8j31n00u0wii.jpg" alt="image-20190926194954822"></p><p>第 13 步：MQ 服务搭建成功</p>',44),r={},i=(0,n(3744).Z)(r,[["render",function(e,s){return a}]])},3744:(e,s)=>{s.Z=(e,s)=>{const n=e.__vccOpts||e;for(const[e,a]of s)n[e]=a;return n}}}]);