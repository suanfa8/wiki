"use strict";(self.webpackChunkblog_tools=self.webpackChunkblog_tools||[]).push([[8626],{9899:(e,a,s)=>{s.r(a),s.d(a,{data:()=>i});const i={key:"v-7cd53eb2",path:"/ElasticSearch/9-%E4%B8%A4%E7%A7%8D%E6%A3%80%E7%B4%A2%E6%96%B9%E5%BC%8F.html",title:"8-全文检索",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:3,title:"QueryString（并不常用）",slug:"querystring-并不常用",children:[]},{level:3,title:"QueryDSL（推荐）",slug:"querydsl-推荐",children:[]},{level:3,title:"term 基于关键字查询",slug:"term-基于关键字查询",children:[]},{level:3,title:"通配符查询",slug:"通配符查询",children:[]},{level:3,title:"多 id 查询",slug:"多-id-查询",children:[]},{level:3,title:"模糊查询（不用特别精确）",slug:"模糊查询-不用特别精确",children:[]},{level:3,title:"布尔查询",slug:"布尔查询",children:[]},{level:3,title:"多字段查询",slug:"多字段查询",children:[]},{level:3,title:"默认字段查询（query_string）",slug:"默认字段查询-query-string",children:[]},{level:3,title:"高亮查询",slug:"高亮查询",children:[]}],filePathRelative:"ElasticSearch/9-两种检索方式.md",git:{updatedTime:163819854e4,contributors:[{name:"suanfa8",email:"45396320+suanfa8@users.noreply.github.com",commits:3}]}}},8595:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});const i=(0,s(6252).uE)('<h1 id="_8-全文检索" tabindex="-1"><a class="header-anchor" href="#_8-全文检索" aria-hidden="true">#</a> 8-全文检索</h1><ul><li>索：创建索引</li><li>检：查询（各种各样的查询）</li></ul><p>ES 官方提供了两中检索方式：</p><ul><li>一种是通过 URL 参数进行搜索；</li><li>另一种是通过 DSL（Domain Specified Language），进行搜索。</li></ul><p>官方更推荐使用第二种方式。第二种方式是基于传递 JS0N 作为请求体（request body）格式与 ES 进行交互，这种方式更强大，更简洁。</p><blockquote><p>官方文档：https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwsc6w2uesj30ww098wf1.jpg" alt="image-20211126102054810"></p><p>使用语法</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /索引/类型/_search?参数\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwscdu78raj30oo0p475i.jpg" alt="image-20211126102734800"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwsceb1525j31iy0u00z2.jpg" alt="image-20211126102801557"></p><h3 id="querystring-并不常用" tabindex="-1"><a class="header-anchor" href="#querystring-并不常用" aria-hidden="true">#</a> QueryString（并不常用）</h3><ol><li>查询所有</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /ems/emp/_search?q=*\n\nGET /ems/emp/_search?q=*&amp;sort=age\n\nGET /ems/emp/_search?q=*&amp;sort=age:desc\n\nGET /ems/emp/_search?q=*&amp;sort=age:desc&amp;size=30\n\nGET /ems/emp/_search?q=*&amp;sort=age:desc&amp;size=30&amp;from=5\n\nfrom = (pageNo - 1) * pageSize\n\nGET /ems/emp/_search?q=*&amp;sort=age:desc&amp;size=30&amp;_source=name\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="querydsl-推荐" tabindex="-1"><a class="header-anchor" href="#querydsl-推荐" aria-hidden="true">#</a> QueryDSL（推荐）</h3><p>ES 中提供了一种强大的检索数据方式这种检索方式称之为 Query DSL（Domain Specified Language），Query DSL 是利用 Rest API 传递 JSON 格式的请求体（Request Body）。</p><p>数据与 ES 进行交互，这种方式的丰富查询语法让 ES 检索变得更强大，更简洁。</p><p>语法：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /索引名/doc/_ search {json格式请求体数据}\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>示例：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /products/_doc/_search\n{\n  &quot;query&quot;: {\n    &quot;match_all&quot;: {}\n  }\n}\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>说明：这里的 <code>_doc</code> 可以不加，不加 <code>_doc</code> 还会有提示。</p><h3 id="term-基于关键字查询" tabindex="-1"><a class="header-anchor" href="#term-基于关键字查询" aria-hidden="true">#</a> term 基于关键字查询</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwssyc2dz6j31920l0jsd.jpg" alt="image-20211126200047524"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwst1n260oj30ve0fy402.jpg" alt="image-20211126200359952"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwst5h36p2j319k0b2jtk.jpg" alt="image-20211126200741515"></p><h4 id="范围查询" tabindex="-1"><a class="header-anchor" href="#范围查询" aria-hidden="true">#</a> 范围查询</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwst6hs2tdj318q0lyab7.jpg" alt="image-20211126200840841"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwstaw2jacj30gm0cwdgc.jpg" alt="image-20211126201254075"></p><h4 id="前缀查询" tabindex="-1"><a class="header-anchor" href="#前缀查询" aria-hidden="true">#</a> 前缀查询</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwstaj8kiqj31ay0ky3zn.jpg" alt="image-20211126201233239"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwstb6ttloj30ke0d4gm5.jpg" alt="image-20211126201311579"></p><h3 id="通配符查询" tabindex="-1"><a class="header-anchor" href="#通配符查询" aria-hidden="true">#</a> 通配符查询</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwstbxn4oaj31980l0abd.jpg" alt="image-20211126201354470"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwstckpk7pj30mu0bymxt.jpg" alt="image-20211126201431040"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwstdaf6cbj30vs0cgq3s.jpg" alt="image-20211126201511798"></p><h3 id="多-id-查询" tabindex="-1"><a class="header-anchor" href="#多-id-查询" aria-hidden="true">#</a> 多 id 查询</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwstdj3ykzj318u0himyg.jpg" alt="image-20211126201526389"></p><h3 id="模糊查询-不用特别精确" tabindex="-1"><a class="header-anchor" href="#模糊查询-不用特别精确" aria-hidden="true">#</a> 模糊查询（不用特别精确）</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwstg8w12lj319u0ryq5e.jpg" alt="image-20211126201802229"></p><h3 id="布尔查询" tabindex="-1"><a class="header-anchor" href="#布尔查询" aria-hidden="true">#</a> 布尔查询</h3><ul><li><code>must</code> 同时成立</li><li><code>should</code> 成立一个就可以了</li></ul><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwsu0l0pq7j315i0u0tac.jpg" alt="image-20211126203737348"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwsu1y49caj30l20logmv.jpg" alt="image-20211126203856446"></p><h3 id="多字段查询" tabindex="-1"><a class="header-anchor" href="#多字段查询" aria-hidden="true">#</a> 多字段查询</h3><ul><li><code>multi_mathc</code> 有强大之处，就是下面的「注意」</li></ul><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwsu33s4dfj30n6094mxn.jpg" alt="image-20211126204003346"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwtib8ggn3j30em086dg5.jpg" alt="image-20211127103811212"></p><h3 id="默认字段查询-query-string" tabindex="-1"><a class="header-anchor" href="#默认字段查询-query-string" aria-hidden="true">#</a> 默认字段查询（query_string）</h3><ul><li>定义默认的字段</li></ul><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwti70fv8jj30ug0bat9i.jpg" alt="image-20211127103406123"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwtiblr9qzj30ia07iwev.jpg" alt="image-20211127103835468"></p><h3 id="高亮查询" tabindex="-1"><a class="header-anchor" href="#高亮查询" aria-hidden="true">#</a> 高亮查询</h3>',53),n={},r=(0,s(3744).Z)(n,[["render",function(e,a){return i}]])},3744:(e,a)=>{a.Z=(e,a)=>{const s=e.__vccOpts||e;for(const[e,i]of a)s[e]=i;return s}}}]);