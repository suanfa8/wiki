"use strict";(self.webpackChunkblog_tools=self.webpackChunkblog_tools||[]).push([[1691],{8705:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-70f10fff",path:"/SpringCloud/8-OpenFeign/8-2-OpenFeign-param.html",title:"8-2 调用服务并传参",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"GET 方式调用服务传递参数",slug:"get-方式调用服务传递参数",children:[{level:3,title:"1、商品服务中添加如下方法",slug:"_1、商品服务中添加如下方法",children:[]},{level:3,title:"2、在用户服务中声明 product 客户端中的方法",slug:"_2、在用户服务中声明-product-客户端中的方法",children:[]},{level:3,title:"3、用户服务中调用并传递参数",slug:"_3、用户服务中调用并传递参数",children:[]}]}],filePathRelative:"SpringCloud/8-OpenFeign/8-2-OpenFeign-param.md",git:{updatedTime:163816338e4,contributors:[{name:"suanfa8",email:"45396320+suanfa8@users.noreply.github.com",commits:3}]}}},1662:(n,s,a)=>{a.r(s),a.d(s,{default:()=>k});var p=a(6252);const t=(0,p._)("h1",{id:"_8-2-调用服务并传参",tabindex:"-1"},[(0,p._)("a",{class:"header-anchor",href:"#_8-2-调用服务并传参","aria-hidden":"true"},"#"),(0,p.Uk)(" 8-2 调用服务并传参")],-1),e={class:"table-of-contents"},c=(0,p.Uk)("GET 方式调用服务传递参数"),o=(0,p.Uk)("1、商品服务中添加如下方法"),l=(0,p.Uk)("2、在用户服务中声明 product 客户端中的方法"),u=(0,p.Uk)("3、用户服务中调用并传递参数"),i=(0,p.uE)('<p>服务和服务之间通信，不仅仅是调用，往往在调用过程中还伴随着参数传递，接下来重点来看看 <code>OpenFeign</code> 在调用服务时如何传递参数。</p><h2 id="get-方式调用服务传递参数" tabindex="-1"><a class="header-anchor" href="#get-方式调用服务传递参数" aria-hidden="true">#</a> GET 方式调用服务传递参数</h2><p>GET 方式调用服务传递参数：</p><ul><li>在商品服务中加入需要传递参数的服务方法来进行测试；</li><li>在用户服务中进行调用商品服务中需要传递参数的服务方法进行测试。</li></ul><h3 id="_1、商品服务中添加如下方法" tabindex="-1"><a class="header-anchor" href="#_1、商品服务中添加如下方法" aria-hidden="true">#</a> 1、商品服务中添加如下方法</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/findOne&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;商品服务查询商品信息调用成功, 当前服务端口：[{}]&quot;</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;当前接收商品信息的 id：[{}]&quot;</span><span class="token punctuation">,</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;商品服务查询商品信息调用成功,当前服务端口: &quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">,</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> map<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7mkve1cj322g0e8q7o.jpg" alt="image-20200713203833730"></p><h3 id="_2、在用户服务中声明-product-客户端中的方法" tabindex="-1"><a class="header-anchor" href="#_2、在用户服务中声明-product-客户端中的方法" aria-hidden="true">#</a> 2、在用户服务中声明 product 客户端中的方法</h3><div class="custom-container danger"><p class="custom-container-title">注意</p><p>使用 openfeign 的 GET 方式传递参数，参数变量必须通过 <code>@requestParam</code> 注解进行修饰。 如果不加入该注解会出现：<code>feign.FeignException$MethodNotAllowed: [405]</code>。</p></div><p>代码：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;PRODUCTS&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProductClient</span> <span class="token punctuation">{</span> \n\t  <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/findOne&quot;</span><span class="token punctuation">)</span>\n \t  <span class="token class-name">String</span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7mo8uv0j323a08ytac.jpg" alt="image-20200713204301830"></p><h3 id="_3、用户服务中调用并传递参数" tabindex="-1"><a class="header-anchor" href="#_3、用户服务中调用并传递参数" aria-hidden="true">#</a> 3、用户服务中调用并传递参数</h3><p>代码：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 注入客户端对象</span>\n<span class="token annotation punctuation">@Autowired</span>\n<span class="token keyword">private</span> <span class="token class-name">ProductClient</span> productClient<span class="token punctuation">;</span>\n\n<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/feign/test1&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;用来测试Openfiegn的GET方式参数传递&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> msg <span class="token operator">=</span> productClient<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;调用返回信息:[{}]&quot;</span><span class="token punctuation">,</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> msg<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7mr25v9j31vg0a2n02.jpg" alt="image-20200728173210751"></p><p>测试访问：</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7mtvna8j321g0gojv9.jpg" alt="image-20200713204827577"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7mxhgloj31uw03cwg0.jpg" alt="image-20200713204851383"></p><h6 id="post-方式调用服务传递参数" tabindex="-1"><a class="header-anchor" href="#post-方式调用服务传递参数" aria-hidden="true">#</a> post 方式调用服务传递参数</h6><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 2.post方式调用服务传递参数</span>\n<span class="token list punctuation">-</span> 在商品服务中加入需要传递参数的服务方法来进行测试\n<span class="token list punctuation">-</span> 在用户服务中进行调用商品服务中需要传递参数的服务方法进行测试\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1.商品服务加入post方式请求并接受name</span>\n<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/save&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;商品服务保存商品调用成功,当前服务端口:[{}]&quot;</span><span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;当前接收商品名称:[{}]&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;商品服务查询商品信息调用成功,当前服务端口: &quot;</span><span class="token operator">+</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> map<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7mzz1zkj321w0eg78m.jpg" alt="image-20200713205125242"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//2.用户服务中在product客户端中声明方法</span>\n<span class="token comment">//value属性用来指定:调用服务名称</span>\n<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;PRODUCTS&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProductClient</span> <span class="token punctuation">{</span>\n    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/save&quot;</span><span class="token punctuation">)</span>\n    <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7n2b83yj325607adhe.jpg" alt="image-20200713205734920"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//3.用户服务中调用并传递参数</span>\n<span class="token annotation punctuation">@Autowired</span>\n<span class="token keyword">private</span> <span class="token class-name">ProductClient</span> productClient<span class="token punctuation">;</span>\n\n<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/save&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> productName<span class="token punctuation">)</span><span class="token punctuation">{</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;接收到的商品信息名称:[{}]&quot;</span><span class="token punctuation">,</span>productName<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token class-name">String</span> save <span class="token operator">=</span> productClient<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>productName<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;调用成功返回结果: &quot;</span><span class="token operator">+</span>save<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> save<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7n42c6cj31ye0e0tbu.jpg" alt="image-20200713205823467"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 测试访问</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7n6zp97j31xo0fydjz.jpg" alt="image-20200713205919054"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7na8qwtj31mi036gn3.jpg" alt="image-20200713210001477"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\n\n\n<span class="token title important"><span class="token punctuation">#</span> 2.传递对象类型参数</span>\n<span class="token list punctuation">-</span> 商品服务定义对象\n<span class="token list punctuation">-</span> 商品服务定义对象接收方法\n<span class="token list punctuation">-</span> 用户服务调用商品服务定义对象参数方法进行参数传递\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1.商品服务定义对象</span>\n<span class="token annotation punctuation">@Data</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">Date</span> bir<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7nd0zpzj31pk084q3t.jpg" alt="image-20200713210437488"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//2.商品服务定义接收对象的方法</span>\n<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/saveProduct&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">saveProduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Product</span> product<span class="token punctuation">)</span><span class="token punctuation">{</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;商品服务保存商品信息调用成功,当前服务端口:[{}]&quot;</span><span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;当前接收商品名称:[{}]&quot;</span><span class="token punctuation">,</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;商品服务查询商品信息调用成功,当前服务端口: &quot;</span><span class="token operator">+</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;product&quot;</span><span class="token punctuation">,</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> map<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7ng7l30j31tu0dyaeu.jpg" alt="image-20200713210641668"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//3.将商品对象复制到用户服务中</span>\n<span class="token comment">//4.用户服务中在product客户端中声明方法</span>\n<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;PRODUCTS&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProductClient</span> <span class="token punctuation">{</span>\n  <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/saveProduct&quot;</span><span class="token punctuation">)</span>\n  <span class="token class-name">String</span> <span class="token function">saveProduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Product</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">//注意:服务提供方和调用方一定要加入@RequestBody注解 </span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7nj2dyoj31vm07amyp.jpg" alt="image-20200713211213241"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 5.在用户服务中调用保存商品信息服务</span>\n<span class="token comment">//注入客户端对象</span>\n<span class="token annotation punctuation">@Autowired</span>\n<span class="token keyword">private</span> <span class="token class-name">ProductClient</span> productClient<span class="token punctuation">;</span>\n\n<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/saveProduct&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveProduct</span><span class="token punctuation">(</span><span class="token class-name">Product</span> product<span class="token punctuation">)</span><span class="token punctuation">{</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;接收到的商品信息:[{}]&quot;</span><span class="token punctuation">,</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token class-name">String</span> save <span class="token operator">=</span> productClient<span class="token punctuation">.</span><span class="token function">saveProduct</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;调用成功返回结果: &quot;</span><span class="token operator">+</span>save<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> save<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7nk59pxj31ua0fun0h.jpg" alt="image-20200713211308524"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 测试</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7nlxezmj32f40m4wl5.jpg" alt="image-20200713211338475"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu7nol3c6j32ay032tah.jpg" alt="image-20200713211402844"></p>',42),r={},k=(0,a(3744).Z)(r,[["render",function(n,s){const a=(0,p.up)("RouterLink");return(0,p.wg)(),(0,p.iD)(p.HY,null,[t,(0,p._)("nav",e,[(0,p._)("ul",null,[(0,p._)("li",null,[(0,p.Wm)(a,{to:"#get-方式调用服务传递参数"},{default:(0,p.w5)((()=>[c])),_:1}),(0,p._)("ul",null,[(0,p._)("li",null,[(0,p.Wm)(a,{to:"#_1、商品服务中添加如下方法"},{default:(0,p.w5)((()=>[o])),_:1})]),(0,p._)("li",null,[(0,p.Wm)(a,{to:"#_2、在用户服务中声明-product-客户端中的方法"},{default:(0,p.w5)((()=>[l])),_:1})]),(0,p._)("li",null,[(0,p.Wm)(a,{to:"#_3、用户服务中调用并传递参数"},{default:(0,p.w5)((()=>[u])),_:1})])])])])]),i],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,p]of s)a[n]=p;return a}}}]);