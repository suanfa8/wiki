"use strict";(self.webpackChunkblog_tools=self.webpackChunkblog_tools||[]).push([[4027],{5909:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-6a7d6498",path:"/SpringCloud/10-Gateway/10-4-router-predicate.html",title:"",lang:"en-US",frontmatter:{},excerpt:"",headers:[],filePathRelative:"SpringCloud/10-Gateway/10-4-router-predicate.md",git:{updatedTime:1638143942e3,contributors:[{name:"suanfa8",email:"45396320+suanfa8@users.noreply.github.com",commits:1}]}}},9399:(n,s,a)=>{a.r(s),a.d(s,{default:()=>p});const t=(0,a(6252).uE)('<h6 id="_4-常用路由predicate-断言-验证" tabindex="-1"><a class="header-anchor" href="#_4-常用路由predicate-断言-验证" aria-hidden="true">#</a> 4. 常用路由predicate(断言,验证)</h6><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.Gateway支持多种方式的predicate</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu869i1mjj323m0lk7bh.jpg" alt="image-20200721112751340"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> After=2020-07-21T11:33:33.993+08:00[Asia/Shanghai]  \t\t\t`指定日期之后的请求进行路由\n<span class="token list punctuation">-</span> Before=2020-07-21T11:33:33.993+08:00[Asia/Shanghai]       `指定日期之前的请求进行路由\n<span class="token list punctuation">-</span> Between=2017-01-20T17:42:47.789-07:00[America/Denver], 2017-01-21T17:42:47.789-07:00[America/Denver]\n<span class="token list punctuation">-</span> Cookie=username,chenyn\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`基于指定cookie的请求进行路由\n<span class="token list punctuation">-</span> Cookie=username,[A-Za-z0-9]+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`基于指定cookie的请求进行路由\t\n\t`curl http://localhost:8989/user/findAll --cookie &quot;username=zhangsna&quot;\n<span class="token list punctuation">-</span> Header=X-Request-Id, \\d+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ``基于请求头中的指定属性的正则匹配路由(这里全是整数)\n\t`curl http://localhost:8989/user/findAll -H &quot;X-Request-Id:11&quot;\n<span class="token list punctuation">-</span> Method=GET,POST\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t `基于指定的请求方式请求进行路由\n\n<span class="token list punctuation">-</span> 官方更多: https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.3.RELEASE/reference/html/#the-cookie-route-predicate-factory\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 2.使用predicate</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>\n  <span class="token key atrule">application</span><span class="token punctuation">:</span>\n    <span class="token key atrule">name</span><span class="token punctuation">:</span> gateway\n  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>\n    <span class="token key atrule">consul</span><span class="token punctuation">:</span>\n      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost\n      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>\n    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>\n      <span class="token key atrule">routes</span><span class="token punctuation">:</span>\n        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> user_route\n          <span class="token comment">#uri: http://localhost:9999/</span>\n          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//users\n          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>\n            <span class="token punctuation">-</span> Path=/user/<span class="token important">**</span>\n            <span class="token punctuation">-</span> After=2020<span class="token punctuation">-</span>07<span class="token punctuation">-</span>21T11<span class="token punctuation">:</span>39<span class="token punctuation">:</span>33.993+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span>\n            <span class="token punctuation">-</span> Cookie=username<span class="token punctuation">,</span><span class="token punctuation">[</span>A<span class="token punctuation">-</span>Za<span class="token punctuation">-</span>z0<span class="token punctuation">-</span><span class="token number">9</span><span class="token punctuation">]</span>+\n            <span class="token punctuation">-</span> Header=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Id<span class="token punctuation">,</span> \\d+\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gvu86e389nj32fe0ca413.jpg" alt="image-20200721152720455"></p>',7),e={},p=(0,a(3744).Z)(e,[["render",function(n,s){return t}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}}}]);